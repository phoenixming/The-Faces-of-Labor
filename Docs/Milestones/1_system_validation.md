# Milestone 1: System Validation

This document extends and finalizes the **First Playable Demo / Milestone 1** specification. It resolves all remaining ambiguities and is intended to be used directly by implementation agents.

This demo is **internal-facing only**. It exists to validate system viability, not player fun, balance, or completeness.

---

## 0. Demo Intent (Locked)

The first demo is a **self-running colony simulation**.

* There is **no player interaction**
* No construction, UI, or job scheduling controls
* All entities are placed by developers before runtime
* The goal is to observe whether the system behaves coherently

If the demo is *interesting to watch* and failures are *explainable*, the design is considered viable.

---

## 1. Jobs (Demo Scope)

Exactly three job types exist in the demo. All jobs are implemented as **JobInstances with `reschedule = UINT_MAX`**.

### 1.1 Farmer

* **Produces:** Crops
* **Consumes:** Nothing
* **Workstation:** Farm
* **Notes:**

  * Mask does not affect the ability to perform this job

---

### 1.2 Chef

* **Produces:** Meals
* **Consumes:** Crops
* **Workstation:** Stove
* **Notes:**

  * Mask does not affect the ability to perform this job

---

### 1.3 Carrier

* **Produces:** Nothing
* **Consumes:** Nothing
* **Behavior:** Delivery only
* **Notes:**

  * Uses the same job system as other NPCs
  * May or may not wear masks

---

## 2. Items (Demo Scope)

Exactly two item types exist.

### 2.1 Crops

* Generated by Farmers
* Consumed by Chefs

### 2.2 Meals

* Generated by Chefs
* Consumed by Dining Halls

**Item Rules:**

* Each item has **exactly one mask**
* Items have **exactly one owner** at all times
* No decay, quality, or metadata

---

## 3. Stations / Locations

### 3.1 Farm

* Produces Crops
* Has output buffer

### 3.2 Stove

* Input buffer: Crops
* Output buffer: Meals

### 3.3 Dining Hall

* Input buffer: Meals
* NPCs eat here when hungry

### 3.4 Mask Stations

* Fixed placement
* Mask inventory is hard-coded for the demo
* Only way NPCs change masks

---

## 4. Mask Semantics (Critical)

### 4.1 Masks Are Identities, Not Abilities

* Jobs **do not require masks**
* Any NPC can perform any job
* Masks only affect **how other systems interpret the NPC**

### 4.2 Demo Mask Set

| Mask       | Meaning                               |
| ---------- | ------------------------------------- |
| FarmerMask | NPC is interpreted as producing Crops |
| ChefMask   | NPC is interpreted as producing Meals |
| No Mask    | NPC is unlabeled                      |

Carriers do not require a mask but may still wear one.

---

## 5. Mask Station Interaction Rules

When an NPC passes through a mask station:

* If NPC **is not wearing a mask** and the station has one → NPC puts it on
* If NPC **is wearing a mask** and the station has free slots → NPC takes it off

No other mask-changing behavior exists.

---

## 6. Item Ownership & Buffers

* Each NPC has an **internal item buffer**
* Default buffer size = **1**
* Producer NPCs store output in their buffer
* Carrier NPCs store transported items in their buffer
* Stations have their own input/output buffers

Items are never dropped into the world.

---

## 7. Hunger System (Only Survival Stat)

### 7.1 Hunger Rules

* Hunger decreases over time
* Hunger is restored by eating Meals

### 7.2 Eating as an Implicit Job

* Eating is implemented as an **implicit job**

* It:

  * Consumes Meals
  * Produces no output
  * Restores hunger

* Uses the **same job system** as other jobs

* Is **not visible** in any player-facing job list

### 7.3 Scheduling Order (Locked)

When an NPC finishes a job:

1. Check implicit needs (hunger)
2. If applicable, execute the implicit job
3. Then attempt continuous job rescheduling
4. If nothing applies, return to idle

When idle:

* NPC periodically checks implicit needs first
* Then checks the global job list

---

## 8. Death Semantics (Demo Only)

* When hunger reaches zero → NPC **dies immediately**
* No intermediate states
* No recovery

This is intentionally harsh for demo simplicity.

---

## 9. Initialization & Runtime Flow

### 9.1 Initialization

* All NPCs, stations, and mask stations are placed in-scene by developers
* No runtime construction

### 9.2 Runtime Behavior

* NPCs autonomously pull jobs from the global job list
* Job claiming is atomic
* The task manager does not assign NPCs proactively

---

## 10. Debug & Observability

For this demo:

* All debug information is visible via the **Unity Inspector**
* No player-facing UI is required

Visible data should include at minimum:

* NPC current job
* NPC mask
* NPC carried item
* Station buffer contents

---

## 11. Demo Success Criteria

This demo is considered successful if:

* NPCs autonomously farm, cook, deliver, and eat
* Mask swaps cause **semantic mismatches** without breaking the system
* Failures (starvation) are visible and explainable
* No player input is required to keep the system running

---

## 12. Scope Reminder

This demo is:

* A **simulation**, not a game
* Used for internal validation only

Fun, balance, and player agency will be addressed in later milestones.
